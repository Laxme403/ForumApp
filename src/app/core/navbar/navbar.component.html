<nav class="navbar">
  <ul class="nav-links">
    <!-- My Activity button (leftmost), only if registered -->
    <li *ngIf="isRegistered" class="my-activity-dropdown-wrapper">
      <button (click)="toggleActivityDropdown($event)">My Activity</button>
      <ul class="my-activity-menu" *ngIf="showActivityDropdown">
        <li (click)="onActivityOptionClick('threads')">Threads Posted</li>
        <li (click)="onActivityOptionClick('replies')">Replies Posted</li>
        <li (click)="onActivityOptionClick('liked')">Threads Liked</li>
        <li (click)="onActivityOptionClick('disliked')">Threads Disliked</li>
      </ul>
    </li>
    <!-- Show Register button if not registered -->
    <li *ngIf="!isRegistered">
      <button (click)="openRegister()">Register</button>
    </li>
    <li *ngIf="isRegistered" class="avatar-dropdown-wrapper" style="position: relative;">
      <div class="navbar-avatar" (click)="toggleAvatarDropdown($event)" style="cursor:pointer;">
        {{ userInitial }}
      </div>
      <ul class="avatar-dropdown-menu" *ngIf="avatarDropdownOpen" style="position: absolute; right: 0; top: 100%; background: white; border: 1px solid #eee; list-style: none; margin: 0; padding: 0;">
        <li>
          <a href="#" (click)="logout(); $event.preventDefault()" style="display: block; padding: 0.5rem 1rem;">Logout</a>
        </li>
      </ul>
    </li>
  </ul>
</nav>

<!-- Modal overlay and modal content -->
<div class="modal-overlay" *ngIf="showRegister" (click)="closeRegister()"></div>
<div class="modal" *ngIf="showRegister">
  <app-user-register (registered)="onRegisterSuccess()"></app-user-register>
  <button class="close-btn" (click)="closeRegister()">Close</button>
</div>

<div *ngIf="registerSuccess" class="register-success-message">
  Successfully registered!
</div>

<app-user-threads-modal
  *ngIf="showUserThreadsModal"
  [threads]="userThreads"
  (close)="showUserThreadsModal = false">
</app-user-threads-modal>
<app-user-replies-modal
  *ngIf="showUserRepliesModal"
  [threads]="userRepliedThreads"
  (close)="showUserRepliesModal = false">
</app-user-replies-modal>

<ul>
  <li *ngFor="let thread of allThreads">
    <span class="thread-link" (click)="goToThread(thread.id, $event)">
      {{ thread.title }}
    </span>
  </li>
</ul>

