<div class="thread-list-page">
  <!-- Search + Filter Row -->
  <div class="filter-search-container">
    <!-- Search Bar -->
    <input
      type="text"
      [(ngModel)]="searchTerm"
      placeholder="Search threads..."
      class="search-bar"
    />

    <!-- Filter Button + Dropdown Container -->
    <div class="filter-container">
      <button class="filter-btn" (click)="toggleFilterDropdown()">Filter</button>

      <!-- Dropdown appears directly under the button -->
      <div class="tag-filter-dropdown" *ngIf="showFilterDropdown">
        <label *ngFor="let tag of allTags" class="tag-checkbox">
          <input
            type="checkbox"
            [value]="tag"
            (change)="toggleTagFilter(tag, $event)"
          />
          {{ tag }}
        </label>
      </div>
    </div>
  </div>

  <!-- Thread List -->
  <div class="thread-list">
    <!-- Blurred background with all thread cards except the selected one -->
    <div class="thread-list-container" [class.blurred]="selectedThreadId !== null">
      <app-thread-card
        *ngFor="let thread of filteredThreads"
        [thread]="thread"
        [selectedThreadId]="selectedThreadId"
        (selectThread)="onSelectThread($event)">
      </app-thread-card>
    </div>

    <!-- Modal-like highlighted selected thread card -->
    <ng-container *ngIf="selectedThreadId !== null && selectedThread">
      <div class="thread-modal-overlay" (click)="selectedThreadId = null"></div>
      <div class="thread-modal">
        <app-thread-card
          [thread]="selectedThread"
          [selectedThreadId]="selectedThreadId"
          (selectThread)="onSelectThread($event)">
        </app-thread-card>
      </div>
    </ng-container>
  </div>
</div>

<!-- Ask Question Button -->
<button class="ask-question-btn" (click)="openThreadCreate()">Ask Question</button>

<!-- Modal overlay and modal content -->
<div class="modal-overlay" *ngIf="showThreadCreateModal" (click)="closeThreadCreate()"></div>
<div class="modal" *ngIf="showThreadCreateModal">
  <app-thread-create
    [author]="loggedInUsername"
    (created)="onThreadCreated()">
  </app-thread-create>
</div>



<!-- User Register Modal -->
<div class="modal-overlay" *ngIf="showUserRegisterModal" (click)="closeUserRegisterModal()"></div>
<div class="modal" *ngIf="showUserRegisterModal">
  <app-user-register (registered)="closeUserRegisterModal(); openThreadCreate()"></app-user-register>
</div>
